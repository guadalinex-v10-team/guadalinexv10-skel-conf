# Festival service init script installation

SYSTEMCTL=systemctl
if [ -f /sbin/systemctl ]; then
	SYSTEMCTL=/sbin/systemctl
fi

if [ -f /bin/systemctl ]; then
	SYSTEMCTL=/bin/systemctl
fi

if [ -f /usr/bin/systemctl ]; then
	SYSTEMCTL=/usr/bin/systemctl
fi

if [ -f /usr/sbin/systemctl ]; then
	SYSTEMCTL=/usr/sbin/systemctl
fi


$SYSTEMCTL daemon-reload
# Set the service to start at boot time
$SYSTEMCTL enable festival.service

if [ -f /etc/speech-dispatcher/speechd.conf ]; then
	# Set festival as default module for speech-dispatcher
	sed -i "s/DefaultModule espeak/DefaultModule festival/g" /etc/speech-dispatcher/speechd.conf
	
	DEFAULT_LANG_DEFINED=$(grep "DefaultLanguage \"es\"" /etc/speech-dispatcher/speechd.conf | wc -l)
	if [ $DEFAULT_LANG_DEFINED -eq 0 ]
	then
		# Set Spanish as the default language
		echo "" >> /etc/speech-dispatcher/speechd.conf
		echo "DefaultLanguage \"es\"" >> /etc/speech-dispatcher/speechd.conf
	fi
fi

